(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e,t,a){e.exports=a(20)},20:function(e,t,a){"use strict";a.r(t);var n,l=a(18),r=a(4),u=a(5),s=a(7),c=a(6),i=a(8),o=a(0),d=a.n(o),m=a(16),p=a.n(m),h=(a(25),a(2)),f=a.n(h),b=a(17),v=a(26),y=!1;function E(e){return d.a.createElement("button",{className:"square",onClick:e.onClick},e.value)}var g,q=function(e){function t(){return Object(r.a)(this,t),Object(s.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(u.a)(t,[{key:"renderSquare",value:function(e){var t=this;return d.a.createElement(E,{value:this.props.squares[e],onClick:function(){return t.props.onClick(e)}})}},{key:"render",value:function(){return d.a.createElement("div",null,d.a.createElement("div",{className:"board-row"},this.renderSquare(0),this.renderSquare(1),this.renderSquare(2)),d.a.createElement("div",{className:"board-row"},this.renderSquare(3),this.renderSquare(4),this.renderSquare(5)),d.a.createElement("div",{className:"board-row"},this.renderSquare(6),this.renderSquare(7),this.renderSquare(8)))}}]),t}(d.a.Component),S=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(s.a)(this,Object(c.a)(t).call(this,e))).state={history:[{squares:Array(9).fill(null)}],stepNumber:0,xIsNext:!0},a}return Object(i.a)(t,e),Object(u.a)(t,[{key:"handleClick",value:function(e){var t=this.state.history.slice(0,this.state.stepNumber+1),a=t[t.length-1].squares.slice();k(a)||a[e]||(y=!1,a[e]=this.state.xIsNext?"X":"O",this.setState({history:t.concat([{squares:a}]),stepNumber:t.length,xIsNext:!this.state.xIsNext}))}},{key:"jumpTo",value:function(e){this.setState({stepNumber:e,xIsNext:e%2===0})}},{key:"genWallet",value:function(e){N(e),this.forceUpdate()}},{key:"revealKey",value:function(){document.getElementById("privKey").innerHTML="Private Key: "+g.privateKey,document.getElementById("seed").innerHTML="Seed: "+g.mnemonic,this.forceUpdate()}},{key:"loadSeed",value:function(){this.gameList();try{return(new f.a).get("walletSeed").data}catch(e){alert(e)}}},{key:"switchWallet",value:function(){g=null,(new f.a).remove("walletSeed"),this.forceUpdate()}},{key:"gameList",value:function(){var e=this;v.get("https://api.simbachain.com/v1/react_tictactoe/turns/",{headers:{APIKEY:"8fbfe71045403b1a0c36d73c4160f778dda31bbd2249d20cf98e3485f5743933"}}).then(function(t){t.data.count>=5&&(n=d.a.createElement("table",null,d.a.createElement("tr",null,d.a.createElement("th",null,"#"),d.a.createElement("th",null,"Name")),d.a.createElement("tr",null,d.a.createElement("td",null,"1"),d.a.createElement("td",null,t.data.results[0].payload.inputs.name),d.a.createElement("td",null,d.a.createElement("button",{class:"animatedbutton greenbutton",onClick:function(t){return e.loadGame(0)}},"Select"))),d.a.createElement("tr",null,d.a.createElement("td",null,"2"),d.a.createElement("td",null,t.data.results[1].payload.inputs.name),d.a.createElement("td",null,d.a.createElement("button",{class:"animatedbutton greenbutton",onClick:function(t){return e.loadGame(1)}},"Select"))),d.a.createElement("tr",null,d.a.createElement("td",null,"3"),d.a.createElement("td",null,t.data.results[2].payload.inputs.name),d.a.createElement("td",null,d.a.createElement("button",{class:"animatedbutton greenbutton",onClick:function(t){return e.loadGame(2)}},"Select"))),d.a.createElement("tr",null,d.a.createElement("td",null,"4"),d.a.createElement("td",null,t.data.results[3].payload.inputs.name),d.a.createElement("td",null,d.a.createElement("button",{class:"animatedbutton greenbutton",onClick:function(t){return e.loadGame(3)}},"Select"))),d.a.createElement("tr",null,d.a.createElement("td",null,"5"),d.a.createElement("td",null,t.data.results[4].payload.inputs.name),d.a.createElement("td",null,d.a.createElement("button",{class:"animatedbutton greenbutton",onClick:function(t){return e.loadGame(4)}},"Select")))),e.forceUpdate())})}},{key:"loadGame",value:function(e){document.body.style.cursor="wait",y=!0;var t=this,a=[];v.get("https://api.simbachain.com/v1/react_tictactoe/turns/",{headers:{APIKEY:"8fbfe71045403b1a0c36d73c4160f778dda31bbd2249d20cf98e3485f5743933"}}).then(function(n){var l,r=n.data.results[e].payload.inputs.turn0.split(";"),u=n.data.results[e].payload.inputs.turn1.split(";"),s=n.data.results[e].payload.inputs.turn2.split(";"),c=n.data.results[e].payload.inputs.turn3.split(";"),i=n.data.results[e].payload.inputs.turn4.split(";"),o=n.data.results[e].payload.inputs.turn5.split(";"),d=n.data.results[e].payload.inputs.turn6.split(";"),m=n.data.results[e].payload.inputs.turn7.split(";"),p=n.data.results[e].payload.inputs.turn8.split(";"),h=n.data.results[e].payload.inputs.turn9.split(";");for(l=0;l<r.length;l++)"null"==r[l]&&(r[l]=null);for(l=0;l<u.length;l++)"null"==u[l]&&(u[l]=null);for(l=0;l<s.length;l++)"null"==s[l]&&(s[l]=null);for(l=0;l<c.length;l++)"null"==c[l]&&(c[l]=null);for(l=0;l<i.length;l++)"null"==i[l]&&(i[l]=null);for(l=0;l<i.length;l++)"null"==o[l]&&(o[l]=null);for(l=0;l<d.length;l++)"null"==d[l]&&(d[l]=null);for(l=0;l<m.length;l++)"null"==m[l]&&(m[l]=null);for(l=0;l<p.length;l++)"null"==p[l]&&(p[l]=null);for(l=0;l<h.length;l++)"null"==h[l]&&(h[l]=null);a=[r,u,s,c,i,o,d,m,p,h];for(var f=0;f<a.length;f++)" "==a[f]&&(a[f]=a[f-1]);var b=t.state.history.slice(0,t.state.stepNumber+1);b[b.length-1].squares.slice();b.length=0,t.setState({history:b.concat([{squares:a[0]},{squares:a[1]},{squares:a[2]},{squares:a[3]},{squares:a[4]},{squares:a[5]},{squares:a[6]},{squares:a[7]},{squares:a[8]},{squares:a[9]}]),stepNumber:9,xIsNext:!t.state.xIsNext}),document.body.style.cursor="auto"})}},{key:"saveGame",value:function(){document.body.style.cursor="wait";var e=this;if(""==document.getElementById("nameInput").value)return document.body.style.cursor="auto",void alert("Please name your game.");if(document.getElementById("nameInput").value.length>50)return document.body.style.cursor="auto",void alert("Character limit exceeded\nName must be 50 characters or less");for(var t=[],a=0;a<this.state.history.length;a++){for(var n=this.state.history[a].squares[0],l=1;l<this.state.history[a].squares.length;l++)n+=";"+this.state.history[a].squares[l];t[a]=n}var r=" ",u=" ",s=" ",c=" ",i=" ",o=" ",d=" ",m=" ",p=" ",h=" ";for(a=0;a<t.length;a++)0==a&&(r=t[a]),1==a&&(u=t[a]),2==a&&(s=t[a]),3==a&&(c=t[a]),4==a&&(i=t[a]),5==a&&(o=t[a]),6==a&&(d=t[a]),7==a&&(m=t[a]),8==a&&(p=t[a]),9==a&&(h=t[a]);var f=new FormData;f.append("from",g.address),f.append("name",document.getElementById("nameInput").value),f.append("turn0",r),f.append("turn1",u),f.append("turn2",s),f.append("turn3",c),f.append("turn4",i),f.append("turn5",o),f.append("turn6",d),f.append("turn7",m),f.append("turn8",p),f.append("turn9",h),f.append("assetId","0x0"),v.post("https://api.simbachain.com/v1/react_tictactoe/turns/",f,{headers:{APIKEY:"8fbfe71045403b1a0c36d73c4160f778dda31bbd2249d20cf98e3485f5743933"}}).then(function(t){if(g){var a=t.data.payload.raw,n=t.data.id;try{delete a.gas,delete a.from}catch(l){}g.sign(a).then(function(e){var t={payload:e};v.post("https://api.simbachain.com/v1/react_tictactoe/transaction/"+n+"/",t,{headers:{APIKEY:"8fbfe71045403b1a0c36d73c4160f778dda31bbd2249d20cf98e3485f5743933"}}).then(function(e){alert("Transaction Signed and Submitted")})})}else alert("Generate wallet before signing");e.gameList(),document.body.style.cursor="auto"}).catch(function(e){});var b=this.state.history.slice(0,this.state.stepNumber+1);b[b.length-1].squares.slice();b.length=0,e.setState({history:b.concat([{squares:[null,null,null,null,null,null,null,null,null]}]),stepNumber:0,xIsNext:!e.state.xIsNext}),this.forceUpdate()}},{key:"render",value:function(){var e=this,t=this.state.history,a=t[this.state.stepNumber],l=k(a.squares),r=t.map(function(t,a){var n=a?"Go to move #"+a:"Go to game start";return d.a.createElement("li",{key:a},d.a.createElement("div",null,d.a.createElement("button",{class:"button animatedbutton",onClick:function(){return e.jumpTo(a)}},n)))}),u=d.a.createElement("div",null);(l||r.length>=10)&&0==y&&(u=d.a.createElement("div",null,d.a.createElement("form",null,"Game Name: ",d.a.createElement("input",{id:"nameInput",type:"text"})," ")," ",d.a.createElement("button",{onClick:function(t){return e.saveGame()},class:"bigbutton animatedbutton"},"Save to SIMBA")));var s,c=d.a.createElement("div",null,d.a.createElement("form",null,"Wallet Seed: ",d.a.createElement("input",{id:"seedInput",type:"text"})," "),d.a.createElement("button",{class:"bigbutton animatedbutton",onClick:function(t){return e.genWallet()}},"Generate Wallet")),i=(d.a.createElement("p",null),g);try{c=d.a.createElement("div",null,d.a.createElement("button",{class:"bigbutton animatedbutton",onClick:function(t){return e.revealKey()}},"Reveal Key"),d.a.createElement("button",{class:"bigbutton animatedbutton",onClick:function(t){return e.switchWallet()}},"Switch Wallet"),d.a.createElement("div",{class:"walletinfo"},d.a.createElement("p",null,"Public Key: ",i.address),d.a.createElement("p",{id:"privKey"},"Private Key:"),d.a.createElement("p",{id:"seed"},"Seed:")))}catch(m){var o=this.loadSeed();o&&this.genWallet(o)}return s=l?"Winner: "+l:"Next player: "+(this.state.xIsNext?"X":"O"),d.a.createElement("div",{className:"game"},d.a.createElement("div",{className:"game-board"},d.a.createElement(q,{squares:a.squares,onClick:function(t){return e.handleClick(t)}}),d.a.createElement("br",null),d.a.createElement("br",null),d.a.createElement("div",null,n),d.a.createElement("div",null,c)),d.a.createElement("div",{className:"game-info"},d.a.createElement("div",null,s),d.a.createElement("ol",null,r),d.a.createElement("div",null,u)))}}]),t}(d.a.Component);function k(e){for(var t=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],a=0;a<t.length;a++){var n=Object(l.a)(t[a],3),r=n[0],u=n[1],s=n[2];if(e[r]&&e[r]===e[u]&&e[r]===e[s])return e[r]}return null}function N(e){try{var t=document.getElementById("seedInput").value}catch(n){e&&(t=e)}try{var a=b.ethers.Wallet.fromMnemonic(t);g=a,function(){if(g){var e=new f.a;e.set("walletSeed",{data:g.mnemonic})}else alert("No wallet present to save")}()}catch(l){alert("Invalid Seed")}}p.a.render(d.a.createElement(S,null),document.getElementById("root"))},25:function(e,t,a){}},[[19,1,2]]]);
//# sourceMappingURL=main.7c88a475.chunk.js.map